<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Pollen Dashboard</title>

  <!-- Link to external CSS file -->
  <link rel="stylesheet" href="style.css">

  <!-- Link to Chart.js from CDN (needed for graphing) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Leaflet.js CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <!-- Leaflet.js JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>

<body>
  <main class="container">
    <h1>Pollen Dashboard</h1>

    <div class="dashboard">
      <!-- Left Panel -->
      <div class="side-panel">
        <section class="card">
          <div class="filter-controls-header">
            <h2>Image History</h2>
            <span style="margin-left: auto;">Load latest</span>
            <label style="margin-left: auto;" class="switch">
              <input type="checkbox" id="toggleButton" onclick="toggleLoadLatest()" checked>
              <span class="slider round"></span>
            </label>
          </div>


          <div class="filter-controls">
            <div class="filter-item">
              <label for="fromDate">From:</label>
              <input type="datetime-local" id="fromDate">
            </div>
            <div class="filter-item">
              <label for="fromDate">Until:</label>
              <input type="datetime-local" id="untilDate">
              <button onclick="loadFilteredImages()">Filter</button>
            </div>
            

            
          </div>


          <div id="imageHistory"></div>
        </section>
      </div>

      <div style="position: relative; display: inline-block;" class="image-wrapper">
        <img id="latestImage" alt="Latest Pollen Image" style="width: 100%; display: block;" />
        <canvas id="boundingCanvas" style="position: absolute; top: 0; left: 0; pointer-events: none;"></canvas>
        <p id="status" class="image-status-top">Loading image...</p>
      
        <div class="toggle-wrapper">
          <span class="toggle-label">BBox Toggle</span>
          <label class="switch">
            <input type="checkbox" id="toggleBoxes" onclick="toggleBoundingBoxes()" checked>
            <span class="slider round"></span>
          </label>
        </div>
      </div>
      
      
    </div>

      <!-- Pollen Count  -->
      <h1>Pollen Count</h1>
      <div id="pollenBox">
        <section class="card">
          <p id="pollenCount">Loading pollen count...</p>
          <canvas id="pollenChart" width="400" height="200"></canvas>
        </section>
      </div>

      <!-- Temp & Humidity  -->
      <h1>Temprature & Humidity </h1>
      <div id="charts-container">


        <div id="tempChartContainer">
          <section class="card">
            <p id="latestTemp">Latest Temp: --Â°C</p>
            <canvas id="tempChart"></canvas>
          </section>
        </div>



        <div id="humidityChartContainer">
          <section class="card">
            <p id="latestHumidity">Latest Humidity: --%</p>
            <canvas id="humidityChart"></canvas>
          </section>
        </div>
      </div>

      <!-- GPS -->
      <h1>GPS </h1>

      <div id="gpsCardContainer" >
        <section class="card">
          <h3>GPS Coordinates</h3>
          <p id="gpsStatus">Loading GPS data...</p>
          <div id="map" style="height: 400px;"></div> <!-- Map container -->
        </section>
      </div>




  </main>>
  <script src="TempHumidityGPS.js"></script>
  <script src="script.js"></script>
</body>

